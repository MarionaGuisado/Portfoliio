<script>
    // InicialitzaciÃ³ automÃ tica - ELIMINA AQUESTA PART SI VOLS EL BOTÃ“ "ENTER"
    document.addEventListener('DOMContentLoaded', function() {
        console.log("PÃ gina carregada correctament!");
        
        // Iniciar automÃ ticament (ELIMINA AQUESTES 3 LÃNIES SI VOLS EL BOTÃ“ ENTER)
        setTimeout(function() {
            startPortfolio();
        }, 1000);
    });

    function startPortfolio() {
        console.log("Iniciant portfolio...");
        
        const transition = document.getElementById('transition');
        const name = document.getElementById('name');
        const background = document.getElementById('background');
        const mainContent = document.getElementById('mainContent');
        const newBackground = document.getElementById('newBackground');
        const navMenu = document.getElementById('navMenu');
        const header = document.getElementById('header');
        const enterButton = document.getElementById('enterButton');

        // 1. TransiciÃ³ blanca
        transition.style.bottom = '100%';
        
        // 2. Amagar botÃ³ Enter
        enterButton.classList.add('hidden');
        
        // 3. Canviar estil del nom
        setTimeout(() => {
            name.style.color = 'black';
            name.style.textShadow = 'none';
            name.style.top = '10%';
            name.style.fontSize = '3rem';
        }, 500);
        
        // 4. Mostrar contingut principal
        setTimeout(() => {
            mainContent.style.display = 'block';
            header.style.display = 'block';
            
            // 5. Mostrar nova imatge i menÃº
            setTimeout(() => {
                newBackground.style.opacity = '1';
                navMenu.style.opacity = '1';
                
                // Efecte d'escriptura
                const aboutText = "A highly motivated Data Engineering student with a strong academic foundation and a passion for transforming data into actionable insights. Demonstrated ability to lead and collaborate effectively through roles as Class Representative and organizer of technology events, fostering communication between diverse groups and driving community engagement. Combines technical knowledge in data analysis with exceptional interpersonal skills, adaptability, and a solutions-oriented mindset. Eager to contribute by leveraging a unique blend of analytical thinking, leadership experience, and a commitment to delivering value in dynamic, team-based environments.";
                
                const typedElement = document.getElementById('typed-text');
                typeWriter(aboutText, typedElement, 20);
            }, 100);
            
            // Amagar fons inicial
            background.style.opacity = '0';
        }, 1000);
    }

    // Si vols el botÃ³ Enter, afegeix aquest event listener:
    // document.getElementById('enterButton').addEventListener('click', function(e) {
    //     e.preventDefault();
    //     startPortfolio();
    // });

    // Efecte d'escriptura
    function typeWriter(text, element, speed) {
        let i = 0;
        element.innerHTML = '';
        element.style.borderRight = '2px solid var(--primary-color)';
        
        const interval = setInterval(() => {
            if (i < text.length) {
                element.innerHTML += text.charAt(i);
                i++;
            } else {
                clearInterval(interval);
                setTimeout(() => {
                    element.style.borderRight = 'none';
                }, 500);
            }
        }, speed);
    }

    // ConfiguraciÃ³ d'esdeveniments
    document.addEventListener('DOMContentLoaded', function() {
        setupEventListeners();
        setupAnimations();
    });

    function setupEventListeners() {
        // NavegaciÃ³ suau
        document.querySelectorAll('.nav-item, .footer-link, .header-nav a').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    targetElement.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // BotÃ³ tornar a dalt
        const backToTopButton = document.getElementById('backToTop');
        if (backToTopButton) {
            backToTopButton.addEventListener('click', function() {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
        }

        // Formulari de contacte
        const contactForm = document.getElementById('contactForm');
        if (contactForm) {
            contactForm.addEventListener('submit', function(e) {
                e.preventDefault();
                alert('Message sent successfully! Thank you for contacting me.');
                this.reset();
            });
        }

        // Dark mode
        const darkModeToggle = document.getElementById('darkModeToggle');
        if (darkModeToggle) {
            darkModeToggle.addEventListener('click', function() {
                document.body.classList.toggle('dark-mode');
                this.textContent = document.body.classList.contains('dark-mode') ? 'â˜€ï¸' : 'ðŸŒ™';
            });
        }

        // Filtres
        document.querySelectorAll('.filter-btn').forEach(button => {
            button.addEventListener('click', function() {
                const filter = this.getAttribute('data-filter');
                const container = this.closest('.section').querySelector('.projects-container, .skills-container');
                
                // Actualitzar botÃ³ actiu
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                this.classList.add('active');
                
                // Filtrar elements
                if (container) {
                    const items = container.querySelectorAll('.project-card, .skill-category');
                    items.forEach(item => {
                        if (filter === 'all' || item.getAttribute('data-category') === filter) {
                            item.style.display = 'block';
                        } else {
                            item.style.display = 'none';
                        }
                    });
                }
            });
        });

        // Scroll handling
        let lastScrollPosition = 0;
        let scrollTimeout;

        window.addEventListener('scroll', function() {
            const currentScrollPosition = window.pageYOffset || document.documentElement.scrollTop;
            
            // BotÃ³ tornar a dalt
            const backToTopButton = document.getElementById('backToTop');
            if (backToTopButton) {
                if (currentScrollPosition > 300) {
                    backToTopButton.classList.add('visible');
                } else {
                    backToTopButton.classList.remove('visible');
                }
            }

            // Header effect
            const header = document.getElementById('header');
            if (header && header.style.display !== 'none') {
                if (currentScrollPosition > 400) {
                    header.classList.add('scrolled');
                } else {
                    header.classList.remove('scrolled');
                }
            }

            lastScrollPosition = currentScrollPosition;
        });
    }

    function setupAnimations() {
        // Barres d'habilitats
        const skillsObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    setTimeout(() => {
                        const skillBars = document.querySelectorAll('.skill-progress');
                        skillBars.forEach(bar => {
                            const width = bar.getAttribute('data-width');
                            bar.style.width = width + '%';
                        });
                    }, 300);
                }
            });
        }, { threshold: 0.3 });

        const skillsSection = document.getElementById('habilitats');
        if (skillsSection) {
            skillsObserver.observe(skillsSection);
        }

        // Transicions de seccions
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = 1;
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        // Observar totes les seccions
        document.querySelectorAll('.section').forEach(section => {
            section.style.opacity = 0;
            section.style.transform = 'translateY(20px)';
            section.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
            observer.observe(section);
        });

        // Actualitzar any copyright
        const yearElement = document.querySelector('.footer-bottom p');
        if (yearElement) {
            const currentYear = new Date().getFullYear();
            yearElement.innerHTML = `&copy; ${currentYear} Mariona Guisado. All rights reserved.`;
        }
    }
</script>
